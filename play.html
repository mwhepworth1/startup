<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Top Comment - Play</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="main.css" rel="stylesheet">
</head>
<body class="d-flex flex-column min-vh-100">
    <header>
        <nav class="navbar navbar-expand-lg">
            <div class="container-fluid position-relative">
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <a class="navbar-brand position-absolute top-50 start-50 translate-middle" href="index.html">Top Comment</a>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item"><a class="nav-link active" href="index.html">Home</a></li>
                        <li class="nav-item"><a class="nav-link" href="play.html">Play</a></li>
                        <li class="nav-item"><a class="nav-link" href="scores.html">Scores</a></li>
                        <li class="nav-item"><a class="nav-link" href="about.html">About</a></li>
                    </ul>
                </div>
                <span class="navbar-game-room">Room Code: <strong>N/A</strong></span>
            </div>
        </nav>
    </header>

    <main class="container-fluid py-4 px-4 flex-fill d-flex flex-column gap-4 justify-content-center">
        
        <!-- Top: Prompt -->
        <section class="card game-card prompt-card text-center p-4 shadow-sm border-0 flex-shrink-0 w-100">
            <h5 class="text-uppercase muted small fw-bold">Current Prompt</h5>
            <h3 class="fw-bold mb-0">"Your reaction when you get rickrolled on I-15"</h3>
        </section>

        <div class="row h-75 lower-game g-4">
            <div class="col-lg-2 d-flex flex-column gap-4 h-100">

                <!-- Submissions -->
                <section class="card game-card submissions-card p-3 shadow-sm border-0 d-flex flex-column h-auto">
                    <h5 class="card-title border-bottom pb-2 flex-shrink-0">Current Submissions</h5>
                    <div class="overflow-auto">
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item bg-transparent d-flex justify-content-between align-items-center">
                                <span>Player 2</span>
                                <span class="badge bg-secondary">Waiting to Vote</span>
                            </li>
                            <li class="list-group-item bg-transparent d-flex justify-content-between align-items-center">
                                <span>Player 3</span>
                                <span class="badge bg-success">Submitted</span>
                            </li>
                        </ul>
                    </div>
                </section>

                <!-- Sidebar (Live Events) -->
                <aside class="card game-card live-events-card p-3 shadow-sm border-0 flex-shrink-0">
                    <h5 class="card-title border-bottom pb-2">Live Events</h5>
                    <div class="overflow-auto">
                        <ul class="list-unstyled small live-events-list">
                            <li class="mb-2"><span class="muted">10:02 AM</span> Player 2 joined</li>
                            <li class="mb-2"><span class="muted">10:03 AM</span> Player 3 joined</li>
                            <li class="mb-2 text-primary fw-bold">Round started!</li>
                        </ul>
                    </div>
                </aside>
            </div>

            <!-- Right Panel: Player Interaction -->
            <div class="col-lg-9 d-flex flex-column ">
                <section class="gif-container game-area card game-card p-4 shadow-lg border-0 h-75 d-flex flex-column">
                    <div class="player-hand-container text-center">
                        <div class="flex-shrink-0 mb-4 w-100">
                            <h2 class="mb-4">Find your perfect GIF</h2>
                            <div class="input-group input-group-lg shadow-sm gif-search-container">
                                <input type="text" id="searchInput" class="form-control" placeholder="Search GIPHY...">
                                <button class="btn btn-primary px-4 fw-bold" id="searchBtn" type="button" onclick="searchGiphy()">SEARCH</button>
                            </div>
                        </div>

                        <div class="gif-grid" id="gifGrid">
                            <!-- Placeholder for GIF results -->
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <footer class="mt-auto">
        <div class="container">
            <p>Created by Matthew</p>
            <p><a href="https://github.com/mwhepworth1/startup">GitHub</a></p>
        </div>
    </footer>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Giphy Search Script -->
    <script>
        function searchGiphy() {
            const input = document.querySelector('#searchInput');
            const grid = document.querySelector('#gifGrid');
            const query = input.value;
            
            const apiKey = 'xy5U7pUUyNChw3G7AJXVBO6XaTZlB7bZ'; 

            if (!query) return;

            grid.innerHTML = '<p class="text-center w-100 text-white">Loading...</p>';

            const url = `https://api.giphy.com/v1/gifs/search?api_key=${apiKey}&q=${encodeURIComponent(query)}&limit=50&rating=g`;

            fetch(url)
                .then(response => response.json())
                .then(content => {
                    grid.innerHTML = ''; 

                    if (content.data.length === 0) {
                        grid.innerHTML = '<p class="text-center w-100 text-white">No results found.</p>';
                        return;
                    }

                    content.data.forEach(gif => {
                        const gifUrl = gif.images.fixed_width.url;
                        const altText = gif.title;

                        const div = document.createElement('div');
                        div.className = 'gif-item';
                        
                        const img = document.createElement('img');
                        img.src = gifUrl;
                        img.alt = altText;
                        img.className = 'img-fluid rounded shadow-sm w-100 mb-2';
                        
                        div.onclick = () => {
                            console.log('Selected GIF:', gifUrl);
                            document.querySelectorAll('.gif-item img').forEach(i => i.style.border = 'none');
                            img.style.border = '4px solid var(--primary-color)';
                        };

                        div.appendChild(img);
                        grid.appendChild(div);
                    });
                })
                .catch(err => {
                    console.error('Error fetching GIFs:', err);
                    grid.innerHTML = '<p class="text-danger text-center w-100">Error loading GIFs.</p>';
                });
        }
        
        document.querySelector('#searchInput').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                searchGiphy();
            }
        });
    </script>
</body>

